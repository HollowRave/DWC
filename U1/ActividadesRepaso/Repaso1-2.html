<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repaso 1.2 - Intervalo a la carta</title>
</head>

<body>
    <script>
        //ENUNCIADO
        // Crear un programa que pida al usuario:

        // - la hora de inicio (ej. 15:00)
        // - la hora de finalización (ej. 17:00)
        // - el intervalo de minutos (sólo el número, ej. 15)

        // Y muestre por consola todas las horas que van desde la hora de inicio a la de 
        // finalización de X en X minutos (ej. 15:00, 15:15, 15:30, 15:45, 16:00, 16:15, 16:30, 16:45, 17:00).

        // Debes controlar:

        // - las horas de inicio y fialización deben ser una hora válida 
        //   (la hora un número entero entre 0 y 24 y los minutos un número entero entre 0 y 59, 
        //   ambos separados por el carácter ":")
        // - el intervalo de minutos deben ser un número entero mayor que 0
        // - si un valor introducido no es correcto se muestra al usuario un mensaje informando del 
        //   error (un alert) y se le vuelve a pedir el valor
        // - en la consola las horas y los minutos se deben mostrar siempre con 2 números (09:03 y no 9:3)

        //FUNCIONES
        function obtenerHoraValida(promptMensaje) {
            while (true) {
                const hora = prompt(promptMensaje);
                const partesHora = hora.split(':');

                if (partesHora.length === 2) {
                    const horas = parseInt(partesHora[0]);
                    const minutos = parseInt(partesHora[1]);

                    if (!isNaN(horas) && !isNaN(minutos) && horas >= 0 && horas < 24 && minutos >= 0 && minutos < 60) {
                        return [horas, minutos];
                    }
                }

                alert('Hora no válida. Debe estar en formato HH:MM y representar una hora válida.');
            }
        }

        function obtenerIntervaloValido(promptMensaje) {
            while (true) {
                const intervalo = prompt(promptMensaje);
                const minutos = parseInt(intervalo);

                if (!isNaN(minutos) && minutos > 0) {
                    return minutos;
                }

                alert('Intervalo no válido. Debe ser un número entero mayor que 0.');
            }
        }

        function mostrarHoras() {
            const [horaInicio, minInicio] = obtenerHoraValida('Introduce la hora de inicio (HH:MM):');
            const [horaFin, minFin] = obtenerHoraValida('Introduce la hora de finalización (HH:MM):');
            const intervaloMinutos = obtenerIntervaloValido('Introduce el intervalo de minutos:');

            let horaActual = new Date(0, 0, 0, horaInicio, minInicio);
            const horaFinDate = new Date(0, 0, 0, horaFin, minFin);

            while (horaActual <= horaFinDate) {
                const horaFormatada = horaActual.getHours().toString().padStart(2, '0');
                const minutoFormatado = horaActual.getMinutes().toString().padStart(2, '0');
                console.log(`${horaFormatada}:${minutoFormatado}`);

                horaActual.setMinutes(horaActual.getMinutes() + intervaloMinutos);
            }
        }


        //PRUEBAS
        mostrarHoras();
    </script>
</body>

</html>